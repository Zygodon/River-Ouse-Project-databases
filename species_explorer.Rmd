---
title: "Species Explorer"
author: "John"
date: "02/12/2019"
output: html_document
runtime: shiny
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(shiny)
library(dplyr)
# source("db_extract.R")
# the_data <- GetTheData()
```

The only purpose of Species Explorer is to get information from the database about species frequency in the assessed Mesotrophic Grassland communities. It is interactive: selecting a species from the drop-down list gives a display of frequency compared with the NVC standard, and a downloadable table of the results.

```{r, echo=FALSE}
selectInput("Species", "Choose a species", 
            choices <-  (the_data %>% select(species_name) 
                       %>% distinct() 
                       %>% arrange(species_name))
)
textOutput("Selected")
tableOutput("table")

output$Selected <- renderText({
  paste("You chose", input$Species)
})

# the_table <- reactive({
# FrequencyByAssembly(the_data) %>% filter(species_name == input$Species) %>% select(assembly_id, assembly_name, community, freq, CrI5, median, CrI95)
# })
#
the_table <- reactive({
  SpeciesFreqWithStandard(the_data, input$Species)
})

# Table of selected species ----
output$table <- renderTable({the_table()})
```

 